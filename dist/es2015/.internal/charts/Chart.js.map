{"version":3,"file":"Chart.js","sourceRoot":"","sources":["../../../../src/.internal/charts/Chart.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * [[Chart]] class provides base functionality for all chart types to inherit.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component, IComponentProperties, IComponentDataFields, IComponentEvents, IComponentAdapters } from \"../core/Component\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../core/Sprite\";\r\nimport { system } from \"../core/System\";\r\nimport { Align } from \"../core/defs/Align\";\r\nimport { ListTemplate, IListEvents } from \"../core/utils/List\";\r\nimport { Container, ContainerLayout } from \"../core/Container\";\r\nimport { Label } from \"../core/elements/Label\";\r\nimport { Legend, LegendPosition, ILegendDataFields, LegendDataItem } from \"../charts/Legend\";\r\nimport { DataItem } from \"../core/DataItem\";\r\nimport { percent } from \"../core/utils/Percent\";\r\nimport * as $iter from \"../core/utils/Iterator\";\r\nimport * as $type from \"../core/utils/Type\";\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[Chart]].\r\n * \r\n * @see {@link DataItem}\r\n */\r\nexport class ChartDataItem extends DataItem {\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t * \r\n\t * @type {Chart}\r\n\t */\r\n\tpublic _component: Chart;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ChartDataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[Chart]].\r\n */\r\nexport interface IChartDataFields extends IComponentDataFields { }\r\n\r\n/**\r\n * Defines properties for [[Chart]].\r\n */\r\nexport interface IChartProperties extends IComponentProperties { }\r\n\r\n/**\r\n * Defines events for [[Chart]].\r\n */\r\nexport interface IChartEvents extends IComponentEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Chart]].\r\n * \r\n * @see {@link Adapter}\r\n */\r\nexport interface IChartAdapters extends IComponentAdapters, IChartProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for all Charts.\r\n * \r\n * @see {@link IChartEvents} for a list of available Events\r\n * @see {@link IChartAdapters} for a list of available Adapters\r\n */\r\nexport class Chart extends Component {\r\n\r\n\t/**\r\n\t * Available data fields.\r\n\t * \r\n\t * @ignore Exclude from docs\r\n\t * @type {IChartDataFields}\r\n\t */\r\n\tpublic _dataFields: IChartDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IChartProperties}\r\n\t */\r\n\tpublic _properties: IChartProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IChartAdapters}\r\n\t */\r\n\tpublic _adapter: IChartAdapters;\r\n\r\n\t/**\r\n\t * Event dispatcher.\r\n\t * \r\n\t * @type {SpriteEventDispatcher<AMEvent<Chart, IChartEvents>>} Event dispatcher instance\r\n\t */\r\n\tpublic events: SpriteEventDispatcher<AMEvent<Chart, IChartEvents>>;\r\n\r\n\t/**\r\n\t * A List of chart titles.\r\n\t * \r\n\t * @type {List<Label>}\r\n\t */\r\n\tpublic titles: ListTemplate<Label>;\r\n\r\n\t/**\r\n\t * Container that holds the chart itself.\r\n\t * \r\n\t * @type {Container}\r\n\t */\r\n\tpublic chartContainer: Container;\r\n\r\n\t/**\r\n\t * A reference to a container that holds both the chart and the legend.\r\n\t * \r\n\t * @type {Container}\r\n\t */\r\n\tpublic chartAndLegendContainer: Container;\r\n\r\n\t/**\r\n\t * A reference to chart's [[Legend]].\r\n\t * @ignore\r\n\t * @type {Legend}\r\n\t */\r\n\tprotected _legend: Legend;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Chart\";\r\n\r\n\t\t// Create a list of titles\r\n\t\tthis.titles = new ListTemplate<Label>(new Label());\r\n\r\n\t\t// Chart component is also a container. it holds _chartAndLegendCont and titles\r\n\t\tthis.width = percent(100);\r\n\t\tthis.height = percent(100);\r\n\t\tthis.layout = \"vertical\";\r\n\r\n\t\t// Chart and legend\r\n\t\tlet chartAndLegendContainer: Container = this.createChild(Container);\r\n\t\tchartAndLegendContainer.layout = \"vertical\";\r\n\t\tchartAndLegendContainer.width = percent(100);\r\n\t\tchartAndLegendContainer.height = percent(100);\r\n\t\tthis.chartAndLegendContainer = chartAndLegendContainer;\r\n\r\n\t\t// Chart container holds all the elements of a chart, extept titles and legend\r\n\t\tlet chartContainer = chartAndLegendContainer.createChild(Container);\r\n\t\tchartContainer.width = percent(100);\r\n\t\tchartContainer.height = percent(100);\r\n\t\tthis.chartContainer = chartContainer;\r\n\r\n\t\t// hides everything on first frame and shows only on second. helps to avoid technical flickering\r\n\t\tchartAndLegendContainer.visible = false;\r\n\r\n\t\tchartAndLegendContainer.events.once(\"validated\", ()=>{\r\n\t\t\tsystem.events.once(\"enterframe\", ()=>{\r\n\t\t\t\tchartAndLegendContainer.visible = true;\r\n\t\t\t})\r\n\t\t})\t\t\r\n\r\n\t\t// Add title list events to apply certain formatting options and to make\r\n\t\t// the chart reference them as accessible screen reader labels\r\n\t\tthis.titles.events.on(\"insert\", (label) => {\r\n\t\t\tthis.processTitle(label);\r\n\t\t\tthis.updateReaderTitleReferences();\r\n\t\t}, this);\r\n\t\tthis.titles.events.on(\"remove\", (label) => {\r\n\t\t\tthis.updateReaderTitleReferences();\r\n\t\t}, this);\r\n\r\n\t\t// Accessibility\r\n\t\t// It seems we can't set focusable on the whole chart because it seems to\r\n\t\t// mess up the whole focus event system - getting a focus on an inside\r\n\t\t// object also trigger focus on parent\r\n\t\t//this.focusable = true;\r\n\t\tthis.role = \"region\";\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tthis.readerTitle = this.language.translate(\"Chart\");\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)validates chart data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateData(): void {\r\n\t\tsuper.validateData();\r\n\t\tthis.feedLegend();\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates drawing of the chart.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tthis.fixLayout();\r\n\t\tsuper.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * Updates legend's hierarchy based on the position.\r\n\t */\r\n\tprotected fixLayout(): void {\r\n\t\tlet legend = this.legend;\r\n\t\tif (legend) {\r\n\t\t\tlet chartAndLegendContainer = this.chartAndLegendContainer;\r\n\t\t\tswitch (legend.position) {\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"horizontal\";\r\n\t\t\t\t\tlegend.toBack();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"horizontal\";\r\n\t\t\t\t\tlegend.toFront();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"top\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"vertical\";\r\n\t\t\t\t\tlegend.toBack();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"vertical\";\r\n\t\t\t\t\tlegend.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Setups the legend to use the chart's data.\r\n\t */\r\n\tprotected feedLegend(): void {\r\n\r\n\t\t// Nothing here. This method is provided only as a \"placeholder\" for\r\n\t\t// extending classes to override\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a new title to the chart when it is inserted into chart's titles\r\n\t * list.\r\n\t * @param  {IListEvents<Label>[\"insert\"]}  event  An event object which is triggered when inserting into titles list\r\n\t * @return {Label}                               Label object\r\n\t */\r\n\tprotected processTitle(event: IListEvents<Label>[\"insert\"]): Label {\r\n\t\tlet title: Label = event.newValue;\r\n\t\ttitle.parent = this;\r\n\t\ttitle.toBack();\r\n\t\ttitle.align = \"center\";\r\n\r\n\t\t// Need to explicitly apply the `id` attribute so it can be referenced by\r\n\t\t// `aria-labelledby`\r\n\t\ttitle.uidAttr();\r\n\t\treturn title;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if chart has any title elements. If it does, we will use them in an\r\n\t * `aria-labelledby` attribute so that screen readers can use them to properly\r\n\t * describe the chart when it is focused or hovered.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateReaderTitleReferences(): void {\r\n\t\tif (this.titles.length) {\r\n\t\t\tlet titleIds: Array<string> = [];\r\n\t\t\t$iter.each(this.titles.iterator(), (title) => {\r\n\t\t\t\ttitleIds.push(title.textElement.uid);\r\n\t\t\t});\r\n\t\t\tthis.setSVGAttribute({ \"aria-labelledby\": titleIds.join(\" \") });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.removeSVGAttribute(\"aria-labelledby\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Chart legend\r\n\t *\r\n\t * @todo Description\r\n\t *\r\n\t * @param {Legend} legend\r\n\t */\r\n\tpublic set legend(legend: Legend) {\r\n\t\tthis.setLegend(legend);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Legend} legend\r\n\t */\r\n\tpublic get legend(): Legend {\r\n\t\treturn this._legend;\r\n\t}\r\n\r\n\tprotected setLegend(legend: Legend) {\r\n\t\tif (this._legend != legend) {\r\n\r\n\t\t\tif (this._legend) {\r\n\t\t\t\tthis.removeDispose(this._legend);\r\n\t\t\t}\r\n\r\n\t\t\tthis._legend = legend;\r\n\r\n\t\t\tif (legend) {\r\n\t\t\t\tthis._disposers.push(legend);\r\n\t\t\t\t// Set legend options\r\n\t\t\t\tlegend.parent = this.chartAndLegendContainer;\r\n\t\t\t\tlegend.events.on(\"propertychanged\", (event) => {\r\n\t\t\t\t\tif (event.property == \"position\") {\r\n\t\t\t\t\t\tthis.fixLayout();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\t// Set up legend\r\n\t\t\tif ($type.hasValue(config.legend) && !$type.hasValue(config.legend.type)) {\r\n\t\t\t\tconfig.legend.type = \"Legend\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n}"]}