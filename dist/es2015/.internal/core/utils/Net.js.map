{"version":3,"file":"Net.js","sourceRoot":"","sources":["../../../../../src/.internal/core/utils/Net.ts"],"names":[],"mappings":"AAAA;;GAEG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8BG;AACH,MAAM,eAAwB,GAAW,EAAE,MAAU;;;YACpD,sBAAO,IAAI,OAAO,CAAoB,UAAC,OAAO,EAAE,KAAK;oBAEpD,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;oBAC/B,GAAG,CAAC,MAAM,GAAG;wBACZ,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC;4BACxB,IAAI,QAAQ,GAAW,GAAG,CAAC,YAAY,IAAI,GAAG,CAAC,QAAQ,CAAC;4BAExD,OAAO,CAAC;gCACP,GAAG,EAAE,GAAG;gCACR,KAAK,EAAE,KAAK;gCACZ,QAAQ,EAAE,QAAQ;gCAClB,IAAI,EAAE,GAAG,CAAC,iBAAiB,CAAC,cAAc,CAAC;gCAC3C,MAAM,EAAE,MAAM;6BACd,CAAC,CAAC;wBACJ,CAAC;wBACD,IAAI,CAAC,CAAC;4BACL,KAAK,CAAC;gCACL,GAAG,EAAE,GAAG;gCACR,KAAK,EAAE,IAAI;gCACX,IAAI,EAAE,GAAG,CAAC,iBAAiB,CAAC,cAAc,CAAC;gCAC3C,MAAM,EAAE,MAAM;6BACd,CAAC,CAAC;wBACJ,CAAC;oBACF,CAAC,CAAC;oBACF,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC;oBACpB,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;oBACrB,GAAG,CAAC,IAAI,EAAE,CAAC;gBAEZ,CAAC,CAAC,EAAC;;;CAEH","sourcesContent":["/**\r\n * A collection of network-related functions\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines an interface for objects that hold a net request result.\r\n */\r\nexport interface INetLoadResult<A> {\r\n\r\n\t/**\r\n\t * A reference to original [[XMLHttpRequest]].\r\n\t * \r\n\t * @type {XMLHttpRequest}\r\n\t */\r\n\txhr: XMLHttpRequest;\r\n\r\n\t/**\r\n\t * Request response body.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\tresponse: string;\r\n\r\n\t/**\r\n\t * Response `Content-Type`.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\ttype: string | null;\r\n\r\n\t/**\r\n\t * Was there an error?\r\n\t * \r\n\t * @type {boolean}\r\n\t */\r\n\terror: boolean;\r\n\r\n\t/**\r\n\t * A target object that made the net load request.\r\n\t * \r\n\t * @type {A}\r\n\t */\r\n\ttarget?: A;\r\n\r\n}\r\n\r\n/**\r\n * Loads an external file via its URL.\r\n *\r\n * Please note that this is an asynchronous function.\r\n *\r\n * It will not return the result, but rather a `Promise`.\r\n *\r\n * You can use the `await` notion, or `then()`.\r\n *\r\n * ```TypeScript\r\n * // Using await\r\n * let response = await Net.load( \"http://www.my.com/data.json\" );\r\n * console.log( response.response );\r\n *\r\n * // Using then()\r\n * Net.load( \"http://www.my.com/data.json\" ).then( ( response ) => {\r\n *   console.log( response.response );\r\n * } );\r\n * ```\r\n * ```JavaScript\r\n * // Using then()\r\n * Net.load( \"http://www.my.com/data.json\" ).then( function( response ) {\r\n *   console.log( response.response );\r\n * } );\r\n * ```\r\n * \r\n * @async\r\n * @param  {string}                      url     URL for the file to load\r\n * @param  {A}                           target  A target element that is requesting the net load\r\n * @return {Promise<INetLoadResult<A>>}          Result (Promise)\r\n */\r\nexport async function load<A>(url: string, target?: A): Promise<INetLoadResult<A>> {\r\n\treturn new Promise<INetLoadResult<A>>((success, error) => {\r\n\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.onload = () => {\r\n\t\t\tif (xhr.status === 200) {\r\n\t\t\t\tlet response: string = xhr.responseText || xhr.response;\r\n\r\n\t\t\t\tsuccess({\r\n\t\t\t\t\txhr: xhr,\r\n\t\t\t\t\terror: false,\r\n\t\t\t\t\tresponse: response,\r\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\r\n\t\t\t\t\ttarget: target\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\terror({\r\n\t\t\t\t\txhr: xhr,\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\r\n\t\t\t\t\ttarget: target\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = error;\r\n\t\txhr.open(\"GET\", url);\r\n\t\txhr.send();\r\n\r\n\t});\r\n\r\n}"]}